---
title: "CI/CD Pipelines"
description: "Automate your Cerebrium deployments using GitHub Actions"
---

If you would like to automatically deploy a new version of your app to production/development when you push a branch or press a button you should configure a Continuous Integration or Continuous Deployment system (CI/CD).

This guide sets up a CI/CD system using GitHub Actions and Cerebriums' Service Accounts.

> We recommend maintaining **separate development and production apps** in separate projects in Cerebrium so that changes can be safely tested before going live.

### 1. Authenticating to Cerebrium

CI/CD workflows use **machine credentials**, not personal user credentials. Cerebrium Service Accounts are designed for this. Create separate service accounts for your production and development projects.

1. Go to the [Cerebrium Dashboard](https://dashboard.cerebrium.ai/) and open the **API Keys** page.
2. Click **Create Service Account**, name it `"GitHub Actions CI/CD"`, choose an expiry date, and click **Create**.
3. **Copy the token** generated for your service account.

![Cerebrium API Keys dashboard](/images/api-key-sa.png)

### 2. Define secrets in your GitHub environment

Now, store this token in your GitHub repository for use in your GitHub Actions workflows.

1. Navigate to your **GitHub repository ‚Üí Settings ‚Üí Environments**
2. Create environments named `"dev"` and/or `"prod"` (depending on your needs).
3. Inside each environment, add a secret:
   - **Name**: `CEREBRIUM_SERVICE_ACCOUNT_TOKEN`
   - **Value**: the token you copied in the previous step.

> üîí Use _secrets_, not plain environment variables, to prevent leaking sensitive data in logs.

![GitHub](/images/githubActions.png)

### 3. GitHub Actions Workflow

GitHub Actions uses workflow files located in the `.github/workflows/` directory of your repository. You‚Äôll need to create one to define your deployment process.

1. In the root of your GitHub repository, create the directory `.github/workflows` if it doesn‚Äôt already exist.
2. Inside that directory, create a new file named `cerebrium-deploy.yml`.
3. Paste the following YAML into the file:

```
name: Cerebrium Deployment
on:
  push:
    branches:
      - master
  workflow_dispatch:
    inputs:
      environment:
        description: "Environment"
        type: choice
        options:
          - "dev"
          - "prod"
        required: true
        default: "dev"
  pull_request:
    branches:
      - master
      - development

jobs:
  deployment:
    runs-on: ubuntu-latest
    environment: ${{ github.event.inputs.environment || (github.ref == 'refs/heads/master' && 'prod') || 'dev' }}
    env:
      ENV: ${{ github.event.inputs.environment || (github.ref == 'refs/heads/master' && 'prod') || 'dev' }}
      CEREBRIUM_SERVICE_ACCOUNT_TOKEN: ${{ secrets.CEREBRIUM_SERVICE_ACCOUNT_TOKEN }}
    steps:
      - uses: actions/checkout@v4.0
      - uses: actions/setup-python@v5.0
        with:
          python-version: "3.10"

      - name: Install Cerebrium
        run: pip install cerebrium

      - name: Deploy App
        run: cerebrium deploy

```

Once committed, this workflow will automatically :
‚Ä¢ On every push to master it will deploy your production application
‚Ä¢ On pull requests to master or development it will deploy to your development app.
‚Ä¢ When manually triggered from the GitHub UI (under the ‚ÄúActions‚Äù tab)

You can monitor workflow runs in the ‚ÄúActions‚Äù tab of your repository.
