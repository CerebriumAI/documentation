---
title: "CI/CD Pipelines"
description: "Integrate Cerebrium into your CI/CD workflow for automated deployments"
---

If you would like to automatically deploy a new version of your app to production/development when you push a branch or press a button you should configure a Continuous Integration or Continuous Deployment system (CI/CD). 


This guide sets up a CI/CD system using GitHub Actions and Cerebriums' Service Accounts.

### 1. Authenticating to Cerebrium

CI/CD and other automated systems need to authenticate to Cerebrium using machine credentials rather than standard user credentials. 
Cerebrium Service accounts provide machine credentials for these use cases.

1 Navigate to your [Cerebrium Dashboard](https://dashboard.cerebrium.ai/) and open the "API Keys" page, this page lists your Inference and Service Account Keys. 
2. Create a new Service Account called "Github Actions CI/CD" with some expiry date and click create.
3. Copy the token that was just created for your service account. 


### 2. Define secrets in your GitHub environment

We will now store this token in your GitHub environment for use in your Github Actions pipeline.

Go to your GitHub repository → Settings → Environments

![GitHub](/images/githubActions.png)

You should create a new environment with a title of your choice ("prod" and "dev"). Within these environments, you have two types
of variables you can work with:

- Environment secrets: These are encrypted and do not show in your workflow logs
- Environment variables: These are not encrypted and will show in the workflow logs

In our case we will store the service account token as a secret. Create a secret called CEREBRIUM_SERVICE_ACCOUNT_TOKEN and set the value to the value we created above.

### 3. GitHub Actions Workflow

In this flow, we do the following:

1. Install a Python version of our choice (3.8 to 3.11).
2. Install the Cerebrium package using pip.
3. Deploy our app. The cerebrium CLI will automatically use the service account from the secret we created.
5. Notify a Slack channel of successful deployment.

```
name: Cerebrium Deployment
on:
  push:
    branches:
      - master
  workflow_dispatch:
    inputs:
      environment:
        description: "Environment"
        type: choice
        options:
          - "dev"
          - "prod"
        required: true
        default: "dev"
  pull_request:
    branches:
      - master
      - development

jobs:
  deployment:
    runs-on: ubuntu-latest
    environment: ${{ github.event.inputs.environment || (github.ref == 'refs/heads/master' && 'prod') || 'dev' }}
    env:
      ENV: ${{ github.event.inputs.environment || (github.ref == 'refs/heads/master' && 'prod') || 'dev' }}
      PROJECT_ID: ${{ secrets.PROJECT_ID }}
      ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
      REFRESH_TOKEN: ${{ secrets.REFRESH_TOKEN }}
    steps:
      - uses: actions/checkout@v4.0
      - uses: actions/setup-python@v5.0
        with:
          python-version: "3.10"

      - name: Install Cerebrium
        run: pip install cerebrium

      - name: Deploy App
        run: cerebrium deploy

      - name: Notify Slack
        uses: someimportantcompany/github-actions-slack-message@v1
        with:
          webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
          text: "Cerebrium app deployed to production! :tada:"
        if: github.ref == 'refs/heads/master'

```
